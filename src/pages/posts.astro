---
import PostsLayout from '../layouts/PostsLayout.astro'

import ListItem from '../components/Posts/ListItem.astro'
import { getAllPosts } from '../utils/api'

const posts = await getAllPosts(
  import.meta.env.PUBLIC_CONTENTFUL_SPACE_ID,
  import.meta.env.PUBLIC_CONTENTFUL_ACCESS_TOKEN
)

---
<PostsLayout title="Posts">
  <div class="max-w-2xl mx-auto py-12 md:py-16 space-y-12 px-4 sm:px-6 lg:max-w-7xl lg:px-8">
    <div class="max-w-3xl">
      <h2 id="features-heading" class="font-medium text-skin-secondary-muted">Welcome to</h2>
      <p class="mt-2 text-3xl font-extrabold tracking-tight text-skin-secondary sm:text-4xl">Blog Posts</p>
      <p class="mt-4 text-sm sm:text-base text-skin-secondary-muted">
        Lorem, ipsum dolor sit amet consectetur adipisicing elit. Vel voluptas cupiditate ad atque sed blanditiis,
        qui, facere tempore dolor, illum ab? Deleniti eius pariatur velit mollitia expedita ipsa nesciunt consectetur!
      </p>
    </div>
    <ol class="grid items-start grid-cols-1 gap-y-16 gap-x-6 sm:grid-cols-2 lg:grid-cols-3 lg:gap-x-12">
      {posts.map(post => <ListItem post={post} />)}
    </ol>
  </div>
</PostsLayout>